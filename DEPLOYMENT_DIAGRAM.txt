```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    AUTO-DEPLOYMENT WORKFLOW WITH WATCHTOWER                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  You Make Code  â”‚
â”‚     Changes     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ git push origin main
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     GitHub      â”‚
â”‚   Repository    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Triggers webhook
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       GitHub Actions Workflow       â”‚
â”‚                                     â”‚
â”‚  1. Checkout code                   â”‚
â”‚  2. Build Docker image              â”‚
â”‚  3. Run tests (optional)            â”‚
â”‚  4. Push to GHCR                    â”‚
â”‚                                     â”‚
â”‚  â±ï¸  Takes 15-25 minutes             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Image pushed
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Container Registry (GHCR)   â”‚
â”‚                                     â”‚
â”‚  ghcr.io/umaraliyev0101/           â”‚
â”‚    ai_for_education:latest         â”‚
â”‚                                     â”‚
â”‚  ğŸ”„ Image updated                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Watchtower polls every 5 min
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ New      â”‚
    â”‚ Image?   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ YES! ğŸ‰
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Watchtower Container        â”‚
â”‚           (On Your Server)          â”‚
â”‚                                     â”‚
â”‚  1. Detects new image               â”‚
â”‚  2. Pulls new image                 â”‚
â”‚  3. Stops old container             â”‚
â”‚  4. Starts new container            â”‚
â”‚  5. Removes old image               â”‚
â”‚                                     â”‚
â”‚  â±ï¸  Takes 1-2 minutes               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Your Application Container     â”‚
â”‚           (Updated! âœ…)             â”‚
â”‚                                     â”‚
â”‚  Running latest code from GitHub    â”‚
â”‚  http://your-server:8001            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TIMELINE FROM GIT PUSH TO LIVE:

  00:00  â”‚ git push origin main
         â”‚
  00:01  â”‚ â–¶ï¸  GitHub Actions starts building
         â”‚
  15:00  â”‚ ğŸ—ï¸  Still building (Docker, ML packages)
         â”‚
  20:00  â”‚ âœ… Build complete, pushing to GHCR
         â”‚
  22:00  â”‚ ğŸ“¦ Image in GHCR
         â”‚
  23:00  â”‚ ğŸ” Watchtower checks (runs every 5 min)
         â”‚
  24:00  â”‚ ğŸ¯ New image detected!
         â”‚
  24:30  â”‚ â¬‡ï¸  Pulling new image
         â”‚
  25:00  â”‚ ğŸ”„ Restarting container
         â”‚
  25:30  â”‚ âœ… LIVE with new code!

  Total: ~25 minutes (fully automatic)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WITHOUT WATCHTOWER (Manual):

  00:00  â”‚ git push origin main
  22:00  â”‚ âœ… Image in GHCR
         â”‚
         â”‚ ğŸ˜´ Server still running old version
         â”‚ ğŸ˜´ You must manually update:
         â”‚
         â”‚ SSH to server
         â”‚ docker pull ghcr.io/.../ai_for_education:latest
         â”‚ docker-compose down
         â”‚ docker-compose up -d
         â”‚
  âˆ      â”‚ â³ Whenever you remember to deploy...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WATCHTOWER CONFIGURATION:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  docker-compose.watchtower.yml      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  app:                               â”‚
â”‚    image: ghcr.io/.../latest        â”‚
â”‚    ports: ["8001:8001"]             â”‚
â”‚    labels:                          â”‚
â”‚      - watchtower.enable=true       â”‚
â”‚                                     â”‚
â”‚  watchtower:                        â”‚
â”‚    image: containrrr/watchtower     â”‚
â”‚    environment:                     â”‚
â”‚      - POLL_INTERVAL=300  # 5 min  â”‚
â”‚      - CLEANUP=true                 â”‚
â”‚      - LABEL_ENABLE=true            â”‚
â”‚    volumes:                         â”‚
â”‚      - /var/run/docker.sock         â”‚
â”‚      - ~/.docker/config.json        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SETUP ON YOUR SERVER:

1ï¸âƒ£  Login to GHCR:
    $ echo "ghp_TOKEN" | docker login ghcr.io -u umaraliyev0101 --password-stdin

2ï¸âƒ£  Start with Watchtower:
    $ docker-compose -f docker-compose.watchtower.yml up -d

3ï¸âƒ£  Verify running:
    $ docker ps
    $ docker logs watchtower -f

4ï¸âƒ£  Test deployment:
    $ Make a change on GitHub
    $ Wait 25 minutes
    $ curl http://your-server:8001/health
    $ ğŸ‰ Updated!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MONITORING:

  View Watchtower logs:
    $ docker logs watchtower -f

  You'll see:
    "Checking for updates..."
    "Found new image..."
    "Stopping container ai-education-app..."
    "Starting container ai-education-app..."
    "Updated container ai-education-app"

  Force update now (don't wait 5 min):
    $ docker exec watchtower watchtower --run-once

  Check current version:
    $ docker inspect ai-education-app | grep Image
    $ docker images | grep ai_for_education

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

COMPARISON:

                      â”‚ Without Watchtower â”‚ With Watchtower
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Auto-deploy          â”‚        âŒ           â”‚       âœ…
Manual work          â”‚        âœ…           â”‚       âŒ
Deployment time      â”‚    When you SSH    â”‚    25 minutes
Forget to deploy?    â”‚      Possible      â”‚    Impossible
Setup complexity     â”‚      Simple        â”‚     Simple
Maintenance          â”‚     Manual         â”‚    Automatic
Notifications        â”‚        No          â”‚  Optional (Yes)
Rollback             â”‚      Manual        â”‚     Manual
Works while you sleepâ”‚        No          â”‚       Yes!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DECISION FLOWCHART:

  Do you want automatic deployment?
          â”‚
          â”œâ”€ NO  â†’ Use current setup (manual)
          â”‚        Keep docker-compose.prod.yml
          â”‚
          â””â”€ YES â†’ Add Watchtower
                   â”‚
                   â”œâ”€ Need SSH deployment control?
                   â”‚  â””â”€ Use GitHub Actions SSH (complex)
                   â”‚
                   â””â”€ Want simple & reliable?
                      â””â”€ Use Watchtower (recommended) â­

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANSWER TO YOUR QUESTION:

  Q: "If I push new changes to GitHub, will it redeploy?"

  A: Currently: NO
     With Watchtower: YES (automatically)

  Solution: Add the Watchtower setup (3 commands, 5 minutes)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
